module.exports = class Data1688085421453 {
    name = 'Data1688085421453'

    async up(db) {
        await db.query(`CREATE TABLE "native_transfer" ("id" character varying NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "extrinsic_hash" text, "amount" numeric NOT NULL, "success" boolean NOT NULL, "from_id" character varying, "to_id" character varying, CONSTRAINT "PK_2c3c43fc41181e002fd0f3bcf0f" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_83b8a385501126ab1e5b3a6e38" ON "native_transfer" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_9d32b6b7e940a49e91af2b7c8b" ON "native_transfer" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_cf97a8008dc22834e9e9d8596e" ON "native_transfer" ("extrinsic_hash") `)
        await db.query(`CREATE INDEX "IDX_dd3c998c07dabdafe827060b67" ON "native_transfer" ("from_id") `)
        await db.query(`CREATE INDEX "IDX_08861105fb579f4171e2e1d21d" ON "native_transfer" ("to_id") `)
        await db.query(`CREATE INDEX "IDX_9eb67c3d0502c44a06df7efbff" ON "native_transfer" ("amount") `)
        await db.query(`CREATE TABLE "account_transfer" ("id" character varying NOT NULL, "direction" character varying(4), "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "extrinsic_hash" text, "transfer_entity_id" character varying, "account_id" character varying, CONSTRAINT "PK_3b959a286b97fc83be6cec239a9" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_ba7739b405c0b1f82a87ebe88a" ON "account_transfer" ("transfer_entity_id") `)
        await db.query(`CREATE INDEX "IDX_d5240d17696e229585da974641" ON "account_transfer" ("account_id") `)
        await db.query(`CREATE INDEX "IDX_281af355f4a52503d977f03ce8" ON "account_transfer" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_680ba6bbaf759a9d221b741cc7" ON "account_transfer" ("extrinsic_hash") `)
        await db.query(`CREATE TABLE "staking_reward" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "extrinsic_hash" text, "amount" numeric NOT NULL, "era" integer, "validator_id" text, "account_id" character varying, CONSTRAINT "PK_63b6754f195dbb71232f598485b" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_6d193d26e0c88588e594475ccf" ON "staking_reward" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_9ac63742f246bfbc1b88a6545a" ON "staking_reward" ("extrinsic_hash") `)
        await db.query(`CREATE INDEX "IDX_a13699fe2651c6c2717a7076f5" ON "staking_reward" ("account_id") `)
        await db.query(`CREATE TABLE "signed_extrinsic" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "extrinsic_hash" text, "call_name" text, "fee" numeric NOT NULL, "account_id" character varying, CONSTRAINT "PK_889e868c68bc7019b06ac7abff5" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_af5c9bb446ecc639cc10969e1d" ON "signed_extrinsic" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_90b996e1f98f4ea5df6711b770" ON "signed_extrinsic" ("extrinsic_hash") `)
        await db.query(`CREATE INDEX "IDX_9f0aaeac0ea9191727ecf1395e" ON "signed_extrinsic" ("call_name") `)
        await db.query(`CREATE INDEX "IDX_a98f435188b9c0f5e68a648c20" ON "signed_extrinsic" ("account_id") `)
        await db.query(`CREATE TABLE "account" ("id" character varying NOT NULL, "public_key" text NOT NULL, CONSTRAINT "PK_54115ee388cdb6d86bb4bf5b2ea" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_34e5683537bbd7627b0e9469b8" ON "account" ("public_key") `)
        await db.query(`ALTER TABLE "native_transfer" ADD CONSTRAINT "FK_dd3c998c07dabdafe827060b67f" FOREIGN KEY ("from_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "native_transfer" ADD CONSTRAINT "FK_08861105fb579f4171e2e1d21d6" FOREIGN KEY ("to_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "account_transfer" ADD CONSTRAINT "FK_ba7739b405c0b1f82a87ebe88a1" FOREIGN KEY ("transfer_entity_id") REFERENCES "native_transfer"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "account_transfer" ADD CONSTRAINT "FK_d5240d17696e229585da974641a" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "staking_reward" ADD CONSTRAINT "FK_a13699fe2651c6c2717a7076f57" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "signed_extrinsic" ADD CONSTRAINT "FK_a98f435188b9c0f5e68a648c205" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "native_transfer"`)
        await db.query(`DROP INDEX "public"."IDX_83b8a385501126ab1e5b3a6e38"`)
        await db.query(`DROP INDEX "public"."IDX_9d32b6b7e940a49e91af2b7c8b"`)
        await db.query(`DROP INDEX "public"."IDX_cf97a8008dc22834e9e9d8596e"`)
        await db.query(`DROP INDEX "public"."IDX_dd3c998c07dabdafe827060b67"`)
        await db.query(`DROP INDEX "public"."IDX_08861105fb579f4171e2e1d21d"`)
        await db.query(`DROP INDEX "public"."IDX_9eb67c3d0502c44a06df7efbff"`)
        await db.query(`DROP TABLE "account_transfer"`)
        await db.query(`DROP INDEX "public"."IDX_ba7739b405c0b1f82a87ebe88a"`)
        await db.query(`DROP INDEX "public"."IDX_d5240d17696e229585da974641"`)
        await db.query(`DROP INDEX "public"."IDX_281af355f4a52503d977f03ce8"`)
        await db.query(`DROP INDEX "public"."IDX_680ba6bbaf759a9d221b741cc7"`)
        await db.query(`DROP TABLE "staking_reward"`)
        await db.query(`DROP INDEX "public"."IDX_6d193d26e0c88588e594475ccf"`)
        await db.query(`DROP INDEX "public"."IDX_9ac63742f246bfbc1b88a6545a"`)
        await db.query(`DROP INDEX "public"."IDX_a13699fe2651c6c2717a7076f5"`)
        await db.query(`DROP TABLE "signed_extrinsic"`)
        await db.query(`DROP INDEX "public"."IDX_af5c9bb446ecc639cc10969e1d"`)
        await db.query(`DROP INDEX "public"."IDX_90b996e1f98f4ea5df6711b770"`)
        await db.query(`DROP INDEX "public"."IDX_9f0aaeac0ea9191727ecf1395e"`)
        await db.query(`DROP INDEX "public"."IDX_a98f435188b9c0f5e68a648c20"`)
        await db.query(`DROP TABLE "account"`)
        await db.query(`DROP INDEX "public"."IDX_34e5683537bbd7627b0e9469b8"`)
        await db.query(`ALTER TABLE "native_transfer" DROP CONSTRAINT "FK_dd3c998c07dabdafe827060b67f"`)
        await db.query(`ALTER TABLE "native_transfer" DROP CONSTRAINT "FK_08861105fb579f4171e2e1d21d6"`)
        await db.query(`ALTER TABLE "account_transfer" DROP CONSTRAINT "FK_ba7739b405c0b1f82a87ebe88a1"`)
        await db.query(`ALTER TABLE "account_transfer" DROP CONSTRAINT "FK_d5240d17696e229585da974641a"`)
        await db.query(`ALTER TABLE "staking_reward" DROP CONSTRAINT "FK_a13699fe2651c6c2717a7076f57"`)
        await db.query(`ALTER TABLE "signed_extrinsic" DROP CONSTRAINT "FK_a98f435188b9c0f5e68a648c205"`)
    }
}
