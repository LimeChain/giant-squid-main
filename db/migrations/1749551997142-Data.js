module.exports = class Data1749551997142 {
    name = 'Data1749551997142'

    async up(db) {
        await db.query(`CREATE TABLE "query_logs" ("id" character varying NOT NULL, "query" text NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "location" text, "chain_name" text NOT NULL, CONSTRAINT "PK_1f27bea0ec566aca1cbfc53e84b" PRIMARY KEY ("id"))`)
        await db.query(`CREATE TABLE "nft_holder" ("id" character varying NOT NULL, "nft_count" integer NOT NULL, "account_id" character varying, "collection_id" character varying, CONSTRAINT "PK_615f76feb8e0d93e85840b738c3" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_1e8580c8be93232e0542d94725" ON "nft_holder" ("account_id") `)
        await db.query(`CREATE INDEX "IDX_bb28884598f9c34a157465eac3" ON "nft_holder" ("collection_id") `)
        await db.query(`CREATE TABLE "nft_token_transfer" ("id" character varying NOT NULL, "token_id" character varying, "transfer_id" character varying, CONSTRAINT "PK_b16891832bedbbc4d84a10be75c" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_28f235222c23f58e3ef292aaa5" ON "nft_token_transfer" ("token_id") `)
        await db.query(`CREATE INDEX "IDX_ed1a96dae435ecb8019a975456" ON "nft_token_transfer" ("transfer_id") `)
        await db.query(`CREATE TABLE "nft_transfer" ("id" character varying NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "block_number" integer NOT NULL, "extrinsic_hash" text NOT NULL, "from_id" character varying, "to_id" character varying, "collection_id" character varying, CONSTRAINT "PK_2d9d4b37560ecbcae8bd13026ab" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_14a7b9aab04cc732ed3c451e46" ON "nft_transfer" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_3f47532cfd7b9e620a22236dd4" ON "nft_transfer" ("extrinsic_hash") `)
        await db.query(`CREATE INDEX "IDX_e25e662117911bbbf337f8dcb6" ON "nft_transfer" ("from_id") `)
        await db.query(`CREATE INDEX "IDX_c84f5916ed381a97f68c9a8fc4" ON "nft_transfer" ("to_id") `)
        await db.query(`CREATE INDEX "IDX_6da4e6c384dcc4208f05762c8b" ON "nft_transfer" ("collection_id") `)
        await db.query(`CREATE TABLE "nft_collection" ("id" character varying NOT NULL, "metadata_uri" text, "owner_id" character varying, CONSTRAINT "PK_ffe58aa05707db77c2f20ecdbc3" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_a44ae247ba071997b3849ec571" ON "nft_collection" ("owner_id") `)
        await db.query(`CREATE TABLE "nft_attribute" ("id" character varying NOT NULL, "key" text NOT NULL, "value" text NOT NULL, "token_id" character varying, CONSTRAINT "PK_e0cb689a52118afb56c43a48f81" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_5d4a0eaa07b48c7f55a5857a3b" ON "nft_attribute" ("token_id") `)
        await db.query(`CREATE TABLE "nft_token" ("id" character varying NOT NULL, "token_id" text NOT NULL, "metadata_uri" text, "standard" character varying(7), "collection_id" character varying, "owner_id" character varying, CONSTRAINT "PK_7e215df412b248db3731737290e" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_8ff047de71b7c3babf498da8ce" ON "nft_token" ("token_id") `)
        await db.query(`CREATE INDEX "IDX_a8d0423b59eba1fa1a39e6c123" ON "nft_token" ("collection_id") `)
        await db.query(`CREATE INDEX "IDX_8dd8203be3cd1816ba715afd21" ON "nft_token" ("owner_id") `)
        await db.query(`CREATE TABLE "account" ("id" character varying NOT NULL, "public_key" text NOT NULL, CONSTRAINT "PK_54115ee388cdb6d86bb4bf5b2ea" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_34e5683537bbd7627b0e9469b8" ON "account" ("public_key") `)
        await db.query(`CREATE TABLE "native_transfer" ("id" character varying NOT NULL, "block_number" integer NOT NULL, "timestamp" TIMESTAMP WITH TIME ZONE NOT NULL, "extrinsic_hash" text, "amount" numeric NOT NULL, "success" boolean NOT NULL, "from_id" character varying, "to_id" character varying, CONSTRAINT "PK_2c3c43fc41181e002fd0f3bcf0f" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_83b8a385501126ab1e5b3a6e38" ON "native_transfer" ("block_number") `)
        await db.query(`CREATE INDEX "IDX_9d32b6b7e940a49e91af2b7c8b" ON "native_transfer" ("timestamp") `)
        await db.query(`CREATE INDEX "IDX_cf97a8008dc22834e9e9d8596e" ON "native_transfer" ("extrinsic_hash") `)
        await db.query(`CREATE INDEX "IDX_dd3c998c07dabdafe827060b67" ON "native_transfer" ("from_id") `)
        await db.query(`CREATE INDEX "IDX_08861105fb579f4171e2e1d21d" ON "native_transfer" ("to_id") `)
        await db.query(`CREATE INDEX "IDX_9eb67c3d0502c44a06df7efbff" ON "native_transfer" ("amount") `)
        await db.query(`CREATE TABLE "transfer" ("id" character varying NOT NULL, "direction" character varying(4), "transfer_id" character varying, "account_id" character varying, CONSTRAINT "PK_fd9ddbdd49a17afcbe014401295" PRIMARY KEY ("id"))`)
        await db.query(`CREATE INDEX "IDX_7aa3769048ff14716eb5e0939e" ON "transfer" ("transfer_id") `)
        await db.query(`CREATE INDEX "IDX_bc8d11fdb46573269220c45af5" ON "transfer" ("account_id") `)
        await db.query(`ALTER TABLE "nft_holder" ADD CONSTRAINT "FK_1e8580c8be93232e0542d947250" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "nft_holder" ADD CONSTRAINT "FK_bb28884598f9c34a157465eac31" FOREIGN KEY ("collection_id") REFERENCES "nft_collection"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "nft_token_transfer" ADD CONSTRAINT "FK_28f235222c23f58e3ef292aaa5f" FOREIGN KEY ("token_id") REFERENCES "nft_token"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "nft_token_transfer" ADD CONSTRAINT "FK_ed1a96dae435ecb8019a9754563" FOREIGN KEY ("transfer_id") REFERENCES "nft_transfer"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "nft_transfer" ADD CONSTRAINT "FK_e25e662117911bbbf337f8dcb62" FOREIGN KEY ("from_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "nft_transfer" ADD CONSTRAINT "FK_c84f5916ed381a97f68c9a8fc4e" FOREIGN KEY ("to_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "nft_transfer" ADD CONSTRAINT "FK_6da4e6c384dcc4208f05762c8bd" FOREIGN KEY ("collection_id") REFERENCES "nft_collection"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "nft_collection" ADD CONSTRAINT "FK_a44ae247ba071997b3849ec5717" FOREIGN KEY ("owner_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "nft_attribute" ADD CONSTRAINT "FK_5d4a0eaa07b48c7f55a5857a3b8" FOREIGN KEY ("token_id") REFERENCES "nft_token"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "nft_token" ADD CONSTRAINT "FK_a8d0423b59eba1fa1a39e6c1232" FOREIGN KEY ("collection_id") REFERENCES "nft_collection"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "nft_token" ADD CONSTRAINT "FK_8dd8203be3cd1816ba715afd21e" FOREIGN KEY ("owner_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "native_transfer" ADD CONSTRAINT "FK_dd3c998c07dabdafe827060b67f" FOREIGN KEY ("from_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "native_transfer" ADD CONSTRAINT "FK_08861105fb579f4171e2e1d21d6" FOREIGN KEY ("to_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "transfer" ADD CONSTRAINT "FK_7aa3769048ff14716eb5e0939e1" FOREIGN KEY ("transfer_id") REFERENCES "native_transfer"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
        await db.query(`ALTER TABLE "transfer" ADD CONSTRAINT "FK_bc8d11fdb46573269220c45af52" FOREIGN KEY ("account_id") REFERENCES "account"("id") ON DELETE NO ACTION ON UPDATE NO ACTION`)
    }

    async down(db) {
        await db.query(`DROP TABLE "query_logs"`)
        await db.query(`DROP TABLE "nft_holder"`)
        await db.query(`DROP INDEX "public"."IDX_1e8580c8be93232e0542d94725"`)
        await db.query(`DROP INDEX "public"."IDX_bb28884598f9c34a157465eac3"`)
        await db.query(`DROP TABLE "nft_token_transfer"`)
        await db.query(`DROP INDEX "public"."IDX_28f235222c23f58e3ef292aaa5"`)
        await db.query(`DROP INDEX "public"."IDX_ed1a96dae435ecb8019a975456"`)
        await db.query(`DROP TABLE "nft_transfer"`)
        await db.query(`DROP INDEX "public"."IDX_14a7b9aab04cc732ed3c451e46"`)
        await db.query(`DROP INDEX "public"."IDX_3f47532cfd7b9e620a22236dd4"`)
        await db.query(`DROP INDEX "public"."IDX_e25e662117911bbbf337f8dcb6"`)
        await db.query(`DROP INDEX "public"."IDX_c84f5916ed381a97f68c9a8fc4"`)
        await db.query(`DROP INDEX "public"."IDX_6da4e6c384dcc4208f05762c8b"`)
        await db.query(`DROP TABLE "nft_collection"`)
        await db.query(`DROP INDEX "public"."IDX_a44ae247ba071997b3849ec571"`)
        await db.query(`DROP TABLE "nft_attribute"`)
        await db.query(`DROP INDEX "public"."IDX_5d4a0eaa07b48c7f55a5857a3b"`)
        await db.query(`DROP TABLE "nft_token"`)
        await db.query(`DROP INDEX "public"."IDX_8ff047de71b7c3babf498da8ce"`)
        await db.query(`DROP INDEX "public"."IDX_a8d0423b59eba1fa1a39e6c123"`)
        await db.query(`DROP INDEX "public"."IDX_8dd8203be3cd1816ba715afd21"`)
        await db.query(`DROP TABLE "account"`)
        await db.query(`DROP INDEX "public"."IDX_34e5683537bbd7627b0e9469b8"`)
        await db.query(`DROP TABLE "native_transfer"`)
        await db.query(`DROP INDEX "public"."IDX_83b8a385501126ab1e5b3a6e38"`)
        await db.query(`DROP INDEX "public"."IDX_9d32b6b7e940a49e91af2b7c8b"`)
        await db.query(`DROP INDEX "public"."IDX_cf97a8008dc22834e9e9d8596e"`)
        await db.query(`DROP INDEX "public"."IDX_dd3c998c07dabdafe827060b67"`)
        await db.query(`DROP INDEX "public"."IDX_08861105fb579f4171e2e1d21d"`)
        await db.query(`DROP INDEX "public"."IDX_9eb67c3d0502c44a06df7efbff"`)
        await db.query(`DROP TABLE "transfer"`)
        await db.query(`DROP INDEX "public"."IDX_7aa3769048ff14716eb5e0939e"`)
        await db.query(`DROP INDEX "public"."IDX_bc8d11fdb46573269220c45af5"`)
        await db.query(`ALTER TABLE "nft_holder" DROP CONSTRAINT "FK_1e8580c8be93232e0542d947250"`)
        await db.query(`ALTER TABLE "nft_holder" DROP CONSTRAINT "FK_bb28884598f9c34a157465eac31"`)
        await db.query(`ALTER TABLE "nft_token_transfer" DROP CONSTRAINT "FK_28f235222c23f58e3ef292aaa5f"`)
        await db.query(`ALTER TABLE "nft_token_transfer" DROP CONSTRAINT "FK_ed1a96dae435ecb8019a9754563"`)
        await db.query(`ALTER TABLE "nft_transfer" DROP CONSTRAINT "FK_e25e662117911bbbf337f8dcb62"`)
        await db.query(`ALTER TABLE "nft_transfer" DROP CONSTRAINT "FK_c84f5916ed381a97f68c9a8fc4e"`)
        await db.query(`ALTER TABLE "nft_transfer" DROP CONSTRAINT "FK_6da4e6c384dcc4208f05762c8bd"`)
        await db.query(`ALTER TABLE "nft_collection" DROP CONSTRAINT "FK_a44ae247ba071997b3849ec5717"`)
        await db.query(`ALTER TABLE "nft_attribute" DROP CONSTRAINT "FK_5d4a0eaa07b48c7f55a5857a3b8"`)
        await db.query(`ALTER TABLE "nft_token" DROP CONSTRAINT "FK_a8d0423b59eba1fa1a39e6c1232"`)
        await db.query(`ALTER TABLE "nft_token" DROP CONSTRAINT "FK_8dd8203be3cd1816ba715afd21e"`)
        await db.query(`ALTER TABLE "native_transfer" DROP CONSTRAINT "FK_dd3c998c07dabdafe827060b67f"`)
        await db.query(`ALTER TABLE "native_transfer" DROP CONSTRAINT "FK_08861105fb579f4171e2e1d21d6"`)
        await db.query(`ALTER TABLE "transfer" DROP CONSTRAINT "FK_7aa3769048ff14716eb5e0939e1"`)
        await db.query(`ALTER TABLE "transfer" DROP CONSTRAINT "FK_bc8d11fdb46573269220c45af52"`)
    }
}
